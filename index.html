<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="shortcut icon"
      href="assets/img/favicon.png"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css"
    />
    <link rel="stylesheet" href="assets/css/swiper-bundle.min.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <title>STARCOFFEE</title>

    <style>
      .show-menu {
        display: block !important;
      }
    </style>
  </head>
  <body>
    <!-- PAGE TRANSITION BAR -->
    <div class="page-transition-bar" id="pageTransitionBar">
      <h1 class="page-transition-text">Mug Coffee</h1>
    </div>

    <!-- HEADER -->
    <div id="header"></div>

    <!-- ANA İÇERİK -->
    <main class="main" id="main"></main>

    <!-- FOOTER -->
    <div id="footer"></div>

    <!-- Atkcodes Kredisi -->
    <div class="atkcodes-credit">
      <p>Bu site Atkcodes Tarafından yazılmıştır</p>
      <a
        href="https://instagram.com/atkcodes"
        target="_blank"
        class="instagram-link"
      >
        <i class="ri-instagram-line"></i>
        Atkcodes
      </a>
    </div>

    <!-- Scroll Up Butonu -->
    <a href="#" class="scrollup" id="scroll-up">
      <i class="ri-arrow-up-line"></i>
    </a>

    <!-- JS -->
    <script src="assets/js/scrollreveal.min.js"></script>
    <script src="assets/js/swiper-bundle.min.js"></script>
    <script src="assets/js/main.js"></script>

    <!-- Sayfa yükleme ve mobil menü -->
    <script>
      // Header yükle + mobil menü işlevi
      fetch("header.html")
        .then((res) => res.text())
        .then((data) => {
          document.getElementById("header").innerHTML = data;

          const navMenu = document.getElementById("nav-menu"),
            navToggle = document.getElementById("nav-toggle"),
            navClose = document.getElementById("nav-close");

          if (navToggle) {
            navToggle.addEventListener("click", () => {
              navMenu.classList.add("show-menu");
            });
          }

          if (navClose) {
            navClose.addEventListener("click", () => {
              navMenu.classList.remove("show-menu");
            });
          }

          const navLinks = document.querySelectorAll(".nav__link");
          navLinks.forEach((link) => {
            link.addEventListener("click", () => {
              navMenu.classList.remove("show-menu");
            });
          });
        });

      // Anasayfa (home.html) içeriğini yükle
      fetch("home.html")
        .then((res) => res.text())
        .then((data) => {
          document.getElementById("main").innerHTML += data;
        });

      // Footer yükle
      fetch("footer.html")
        .then((res) => res.text())
        .then((data) => {
          document.getElementById("footer").innerHTML = data;
        });

      // Sayfa geçiş efekti
      const pageTransitionBar = document.getElementById('pageTransitionBar');
      
      // Sayfa yüklendiğinde geçiş bar'ını gizle
      window.addEventListener('load', () => {
        setTimeout(() => {
          pageTransitionBar.style.left = '100%';
        }, 1000);
      });

      // Sayfa geçişlerinde geçiş bar'ını göster
      const links = document.querySelectorAll('a[href]');
      links.forEach(link => {
        link.addEventListener('click', (e) => {
          const href = link.getAttribute('href');
          
          // Eğer external link değilse ve aynı sayfa değilse
          if (href && !href.startsWith('http') && !href.startsWith('#') && href !== window.location.pathname) {
            e.preventDefault();
            pageTransitionBar.classList.add('active');
            
            // Kısa bir gecikme sonra sayfaya git
            setTimeout(() => {
              window.location.href = href;
            }, 800);
          }
        });
      });

      // Browser back/forward butonları için
      window.addEventListener('beforeunload', () => {
        pageTransitionBar.classList.add('active');
      });
    </script>
  </body>
</html>
