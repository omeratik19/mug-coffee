<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Products</title>
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 6px;
        padding: 0;
        background: #f4f4f4;
      }
      .show-menu {
        display: block !important;
      }
      .categories {
        text-align: center;
        margin: 2rem 0;
        margin-top: 100px;
      }
      .category-btn {
        background-color: #ddd;
        border: none;
        padding: 10px 18px;
        margin: 0 6px;
        cursor: pointer;
        font-weight: bold;
        border-radius: 6px;
        transition: background-color 0.3s;
      }
      .category-btn.active,
      .category-btn:hover {
        background-color: #a67c00;
        color: white;
      }
      .products-container {
        max-width: 1200px;
        margin: auto;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 18px;
        padding: 0 20px 40px;
      }
      .product-card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
        text-align: center;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
      }
      .product-card:hover {
        transform: scale(1.06);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
      }
      .product-card img {
        width: 120px;
        height: 120px;
        object-fit: contain;
        margin: 0 auto 12px;
        display: block;
      }
      .product-card h4 {
        margin: 0;
        font-size: 1.1rem;
        color: #333;
      }
      .modal-bg {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        visibility: hidden;
        opacity: 0;
        transition: opacity 0.5s ease;
        backdrop-filter: blur(3px);
        z-index: 9999;
      }
      .modal-bg.active {
        visibility: visible;
        opacity: 1;
      }
      .modal-content {
        background: white;
        padding: 30px;
        border-radius: 14px;
        max-width: 400px;
        width: 90%;
        text-align: center;
        transform: scale(0.3);
        filter: blur(20px);
        animation: zoomBlurIn 0.6s forwards;
        position: relative;
      }
      @keyframes zoomBlurIn {
        to {
          transform: scale(1);
          filter: blur(0);
        }
      }
      .modal-content h2 {
        margin-top: 0;
      }
      .modal-close {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #a67c00;
        color: white;
        border: none;
        font-size: 18px;
        padding: 4px 10px;
        border-radius: 50%;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <!-- PAGE TRANSITION BAR -->
    <div class="page-transition-bar" id="pageTransitionBar">
      <h1 class="page-transition-text">Mug Coffee</h1>
    </div>

    <div id="header-placeholder"></div>

    <!-- Kategoriler -->
    <div class="categories">
      <button class="category-btn active" data-category="sicak-icecekler">
        Sıcak İçecekler
      </button>
      <button class="category-btn" data-category="soguk-icecekler">
        Soğuk İçecekler
      </button>
      <button class="category-btn" data-category="yiyecekler">
        Yiyecekler
      </button>
      <button class="category-btn" data-category="tatlilar">Tatlılar</button>
    </div>

    <div class="products-container" id="products-container"></div>

    <!-- Modal -->
    <div class="modal-bg" id="modal-bg">
      <div class="modal-content" id="modal-content">
        <button class="modal-close" id="modal-close">&times;</button>
        <h2 id="modal-title"></h2>
      </div>
    </div>

    <div id="footer-placeholder"></div>

    <script>
      // Header/Footer yükle ve mobil menü etkinleştir
      function loadHTML(id, url) {
        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            document.getElementById(id).innerHTML = data;

            if (id === "header-placeholder") {
              const navMenu = document.getElementById("nav-menu"),
                navToggle = document.getElementById("nav-toggle"),
                navClose = document.getElementById("nav-close");

              if (navToggle) {
                navToggle.addEventListener("click", () => {
                  navMenu.classList.add("show-menu");
                });
              }

              if (navClose) {
                navClose.addEventListener("click", () => {
                  navMenu.classList.remove("show-menu");
                });
              }

              const navLinks = document.querySelectorAll(".nav__link");
              navLinks.forEach((n) =>
                n.addEventListener("click", () => {
                  navMenu.classList.remove("show-menu");
                })
              );
            }
          });
      }
      loadHTML("header-placeholder", "header.html");
      loadHTML("footer-placeholder", "footer.html");

      const productsData = {
        "sicak-icecekler": [
          "americano",
          "cortado",
          "cappuchino",
          "flat white",
          "latte",
          "caramel macchiato",
          "mug mocha",
          "whıte mocha",
          "filtre kahve",
          "sütlü filtre kahve",
          "türk kahvesi",
          "toffee nut latte",
          "soft irish",
          "dark coco",
          "berry whıte",
          "chai tea latte",
          "sıcak çikolata",
          "salep",
          "bitki çayı",
          "double espressso",
          "double türk kahvesi",
          "black eye",
          "dead eye",
          "pikachu",
          "jigglypuff",
          "pumpkin spice latte",
          "meowth",
          "kupa çay",
          "karton bardak",
          "gold mocha",
          "süt reçeli latte",
          "ekstra hot",
        ],
        "soguk-icecekler": [
          "Smoothie",
          "Frozen",
          "cold brew latte",
          "buzlu bardak",
          "damla cam su",
          "damla cam soda",
          "cool lime",
          "strawberry hibiscus",
          "mango dragonfruit",
          "cold brew",
          "limonata",
          "çilekli limonata",
        ],
        yiyecekler: [
          "3 peynir bagel",
          "hindi füme çeçil peynir",
          "sebzeli vejeteryan",
          "5 peynir",
          "dana jambon kaşar",
          "tavuk teriyaki",
          "cheddar italyan",
          "italyan sandvic + coca cola",
        ],
        tatlilar: [
          "brownie",
          "cookie",
          "orman meyveli cheesecake",
          "kalpli pasta",
          "bardak cookie",
          "latte mono",
          "washington",
          "mozaik pasta",
          "dilim kek",
          "parfe",
          "kechy dondurma",
          "muffin",
          "snickers pasta",
          "tahılı barlar",
          "makaron",
          "limonlu cheesecake",
          "çikolatalı suffle",
          "marlenika",
          "callebaut çikolata",
          "kek+filtre kahve",
          "cookie + latte",
        ],
      };

      function getImageSrc(productName) {
        const formatted = productName.toLowerCase();
        // Yiyecekler için özel görsel eşlemesi
        const yiyeceklerImages = {
          "3 peynir bagel": "assets/img/yiyecekler/3-peynir-bagel.png",
          "hindi füme çeçil peynir": "assets/img/yiyecekler/hindfüme.png",
          "sebzeli vejeteryan": "assets/img/yiyecekler/sebzeli.png",
          "5 peynir": "assets/img/yiyecekler/5 peynir.png",
          "dana jambon kaşar": "assets/img/yiyecekler/dana jambon kaşar.png",
          "tavuk teriyaki": "assets/img/yiyecekler/tavuk-teriyaki.png",
          "cheddar italyan": "assets/img/yiyecekler/cheddar-italyan.png",
          "italyan sandvic + coca cola":
            "assets/img/yiyecekler/italyan-sandvic-coca-cola.png",
          denem: "assets/img/yiyecekler/denem.png",
        };

        // Tatlılar için özel görsel eşlemesi
        const tatlilarImages = {
          brownie: "assets/img/tatlilar/brownie.png",
          cookie: "assets/img/tatlilar/cookie.png",
          "orman meyveli cheesecake":
            "assets/img/tatlilar/orman-meyveli-cheesecake.png",
          "kalpli pasta": "assets/img/tatlilar/kalpli-pasta.png",
          "bardak cookie": "assets/img/tatlilar/bardak-cookie.png",
          "latte mono": "assets/img/tatlilar/latte-mono.png",
          washington: "assets/img/tatlilar/washington.png",
          "mozaik pasta": "assets/img/tatlilar/mozaik-pasta.png",
          "dilim kek": "assets/img/tatlilar/dilim-kek.png",
          parfe: "assets/img/tatlilar/parfe.png",
          "kechy dondurma": "assets/img/tatlilar/kechy-dondurma.png",
          muffin: "assets/img/tatlilar/muffin.png",
          "snickers pasta": "assets/img/tatlilar/snickers-pasta.png",
          "tahılı barlar": "assets/img/tatlilar/tahili-barlar.png",
          makaron: "assets/img/tatlilar/makaron.png",
          "limonlu cheesecake": "assets/img/tatlilar/limonlu-cheesecake.png",
          "çikolatalı suffle": "assets/img/tatlilar/cikolatali-suffle.png",
          marlenika: "assets/img/tatlilar/marlenika.png",
          "callebaut çikolata": "assets/img/tatlilar/callebaut-cikolata.png",
          "kek+filtre kahve": "assets/img/tatlilar/kek-filtre-kahve.png",
          "cookie + latte": "assets/img/tatlilar/cookie-latte.png",
        };

        if (
          productsData["yiyecekler"].includes(productName) &&
          yiyeceklerImages[productName]
        ) {
          return yiyeceklerImages[productName];
        } else if (
          productsData["tatlilar"].includes(productName) &&
          tatlilarImages[productName]
        ) {
          return tatlilarImages[productName];
        } else if (productsData["soguk-icecekler"].includes(productName)) {
          return `assets/img/soguk icecekler/${formatted}.png`;
        } else if (productsData["sicak-icecekler"].includes(productName)) {
          return `assets/img/sıcak icecekler/${formatted}.png`;
        } else {
          return `assets/img/placeholder.png`;
        }
      }

      const productsContainer = document.getElementById("products-container");
      const modalBg = document.getElementById("modal-bg");
      const modalTitle = document.getElementById("modal-title");
      const modalClose = document.getElementById("modal-close");

      function showProducts(category) {
        productsContainer.innerHTML = "";
        productsData[category].forEach((product) => {
          const card = document.createElement("div");
          card.className = "product-card";
          card.innerHTML = `<img src="${getImageSrc(
            product
          )}" alt="${product}" /><h4>${product}</h4>`;
          card.addEventListener("click", () => {
            modalTitle.textContent = product;
            modalBg.classList.add("active");
          });
          productsContainer.appendChild(card);
        });
      }

      document.querySelectorAll(".category-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          document
            .querySelectorAll(".category-btn")
            .forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
          const category = btn.getAttribute("data-category");
          showProducts(category);
        });
      });

      modalClose.addEventListener("click", () => {
        modalBg.classList.remove("active");
      });

      modalBg.addEventListener("click", (e) => {
        if (e.target === modalBg) {
          modalBg.classList.remove("active");
        }
      });

      showProducts("sicak-icecekler");

      // Sayfa geçiş efekti
      const pageTransitionBar = document.getElementById("pageTransitionBar");

      // Sayfa yüklendiğinde geçiş bar'ını gizle
      window.addEventListener("load", () => {
        setTimeout(() => {
          pageTransitionBar.classList.add("exit");
        }, 2500);
      });

      // Sayfa geçişlerinde geçiş bar'ını göster
      const links = document.querySelectorAll("a[href]");
      links.forEach((link) => {
        link.addEventListener("click", (e) => {
          const href = link.getAttribute("href");

          // Eğer external link değilse ve aynı sayfa değilse
          if (
            href &&
            !href.startsWith("http") &&
            !href.startsWith("#") &&
            href !== window.location.pathname
          ) {
            e.preventDefault();
            pageTransitionBar.classList.add("active");

            // Kısa bir gecikme sonra sayfaya git
            setTimeout(() => {
              window.location.href = href;
            }, 1200);
          }
        });
      });

      // Browser back/forward butonları için
      window.addEventListener("beforeunload", () => {
        pageTransitionBar.classList.add("active");
      });
    </script>
  </body>
</html>
